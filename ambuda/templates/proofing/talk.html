{% extends 'proofing/base.html' %}
{% import "macros/components.html" as mc %}
{% import "macros/proofing.html" as m %}
{% import "macros/proofing-talk.html" as m_talk %}


{% block title %}{{ mc.title(_('Talk')) }}{% endblock %}


{% block content %}
{{ m.header(_('Talk')) }}
{{ m.proofing_tabs('talk', current_user) }}

{% for project, thread in all_threads %}
  {% set project_url = url_for('proofing.project.summary', slug=project.slug) %}
  {% set thread_url = url_for('proofing.talk.thread', project_slug=project.slug, thread_id=thread.id) %}
  {% set author_url = url_for('user.summary', username=thread.author.username) %}
  <li class="p-4 border-t a-hover-underline flex justify-between">
    <div>
      <a href="{{ thread_url }}">{{ thread.title }}</a>
      <p class="text-sm text-slate-400">
        <a href="{{ project_url }}">{{ project.display_title }}</a>
        | {{ _('Created by') }} <a href="{{ author_url }}">{{ thread.author.username }}</a>
      </p>
    </div>
    <p class="text-sm">{{ thread.updated_at|time_ago }}</p>
  </li>
{% else %}
<p class="text-slate-500">{{ _("There isn't any ongoing discussion yet. To start a discussion, go to the project you want to discuss and click on its Talk tab.") }}</p>
{% endfor %}

{% endblock %}
